<div>
  <h2>{{ id ? 'Edit Task' : 'New Task' }}</h2>
  <form [formGroup]="form" (ngSubmit)="save()">
    <div>
      <label>Name</label>
      <input formControlName="name" />
    </div>

    <div>
      <label>Description</label>
      <textarea formControlName="description"></textarea>
    </div>

    <div>
      <label>Priority</label>
      <select formControlName="priority">
        <option *ngFor="let p of priorities" [value]="p">{{ p }}</option>
      </select>
    </div>

    <div>
      <label>Status</label>
      <select formControlName="status">
        <option *ngFor="let s of statuses" [value]="s">{{ s }}</option>
      </select>
    </div>

    <div>
      <label>Project</label>
      <select formControlName="projectId">
        <option [ngValue]="null">-- none --</option>
        <option *ngFor="let p of projects" [ngValue]="p.id">{{ p.name }}</option>
      </select>
    </div>

    <div>
      <label>Assignees</label>
      <select formControlName="assignedIds" multiple>
        <option *ngFor="let u of users" [ngValue]="u.id">{{ u.email }}</option>
      </select>
    </div>

    <div>
      <button type="submit" [disabled]="form.invalid">Save</button>
      <button type="button" (click)="cancel()">Cancel</button>
    </div>
  </form>
</div>
