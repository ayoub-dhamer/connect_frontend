<div class="projects-container">
  <h2 class="table-title">üìÅ Project Management</h2>

  <!-- Action Bar -->
  <div class="action-bar">
    <button class="add-btn" >+ New Project</button>

    <input
      type="text"
      placeholder="Search projects..."
      [(ngModel)]="searchTerm"
      (input)="filterProjects()"
      class="search-input"
    />
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="loading">Loading projects...</div>

  <!-- Table -->
  <table class="responsive-table" *ngIf="!loading">
    <caption>List of Projects</caption>
    <thead>
      <tr>
        <th>Name</th>
        <th>Owner</th>
        <th>Participants</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let p of filteredProjects">
        <td data-label="Name">{{ p.name }}</td>
        <td data-label="Owner">{{ p.owner?.email }}</td>

        <td data-label="Participants">
          <span *ngFor="let email of getParticipantEmailsArray(p)" class="badge">
            {{ email }}
          </span>
        </td>

        <td data-label="Actions">
          <button class="edit-btn" >Edit</button>
          <button class="delete-btn" >Delete</button>
        </td>
      </tr>

      <tr *ngIf="filteredProjects.length === 0">
        <td colspan="4" class="no-data">No projects found</td>
      </tr>
    </tbody>
  </table>

  <!-- Pagination -->
  <div class="pagination-container" *ngIf="filteredProjects.length > 0">
    <div class="page-size">
      <label for="pageSize">Rows per page:</label>
      <select id="pageSize" [(ngModel)]="pageSize" (change)="updatePagination()">
        <option *ngFor="let size of pageSizes" [value]="size">{{ size }}</option>
      </select>
    </div>

    <div class="page-controls">
      <button (click)="previousPage()" [disabled]="currentPage === 1">Prev</button>
      <span>Page {{ currentPage }} of {{ totalPages }}</span>
      <button (click)="nextPage()" [disabled]="currentPage === totalPages">Next</button>
    </div>
  </div>
</div>
